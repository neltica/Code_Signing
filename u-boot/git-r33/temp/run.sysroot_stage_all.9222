#!/bin/sh -e
export prefix="/usr"
export STRIP="powerpc-fsl_networking-linux-gnuspe-strip"
export localstatedir="/var"
export BUILD_CC="gcc"
export PKG_CONFIG_SYSROOT_DIR="/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb"
export BUILD_CXX="g++"
export LD="powerpc-fsl_networking-linux-gnuspe-ld --sysroot=/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb"
export bindir="/usr/bin"
export includedir="/usr/include"
export BUILD_LDFLAGS="-L/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/lib -L/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/lib -Wl,-rpath-link,/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/lib -Wl,-rpath-link,/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/lib -Wl,-rpath,/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/lib -Wl,-rpath,/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/lib -Wl,-O1"
export BUILD_LD="ld"
export oldincludedir="/usr/include"
export BUILD_CCLD="gcc"
export RANLIB="powerpc-fsl_networking-linux-gnuspe-ranlib"
export libexecdir="/usr/lib/u-boot"
export CXX="powerpc-fsl_networking-linux-gnuspe-g++  -m32   -mcpu=8548 -mabi=spe -mspe -mfloat-gprs=double --sysroot=/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb"
export datadir="/usr/share"
export BUILD_RANLIB="ranlib"
export mandir="/usr/share/man"
export OBJCOPY="powerpc-fsl_networking-linux-gnuspe-objcopy"
export servicedir="/srv"
export LC_ALL="C"
export PKG_CONFIG_DIR="/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb//usr/lib/pkgconfig"
export CCLD="powerpc-fsl_networking-linux-gnuspe-gcc  -m32   -mcpu=8548 -mabi=spe -mspe -mfloat-gprs=double --sysroot=/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb"
export TARGET_CXXFLAGS="-O2 -pipe -g -feliminate-unused-debug-types -fpermissive"
export base_bindir="/bin"
export PKG_CONFIG_LIBDIR="/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb//usr/lib/pkgconfig"
export sbindir="/usr/sbin"
export CFLAGS="-O2 -pipe -g -feliminate-unused-debug-types"
export TARGET_LDFLAGS="-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed"
export PKG_CONFIG_DISABLE_UNINSTALLED="yes"
export PSEUDO_DISABLED="0"
export libdir="/usr/lib"
export CXXFLAGS="-O2 -pipe -g -feliminate-unused-debug-types -fpermissive -fvisibility-inlines-hidden"
export NM="powerpc-fsl_networking-linux-gnuspe-nm"
export F77="powerpc-fsl_networking-linux-gnuspe-g77  -m32   -mcpu=8548 -mabi=spe -mspe -mfloat-gprs=double --sysroot=/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb"
export USER="sangmin"
export LDFLAGS="-Wl,-O1 -Wl,--hash-style=gnu -Wl,--as-needed"
export MAKE="make"
unset TARGET_ARCH
export BUILD_F77="g77"
export CCACHE_DIR="/home/sangmin"
export BUILD_CPP="cpp"
export BUILD_CFLAGS="-isystem/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/include -O2 -pipe"
export docdir="/usr/share/doc"
export infodir="/usr/share/info"
export TERM="xterm"
export base_sbindir="/sbin"
export systemd_unitdir="/lib/systemd"
export BUILD_NM="nm"
export PKG_CONFIG_PATH="/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb//usr/lib/pkgconfig:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb/usr/share/pkgconfig"
export AS="powerpc-fsl_networking-linux-gnuspe-as"
export AR="powerpc-fsl_networking-linux-gnuspe-ar"
export BUILD_CPPFLAGS="-isystem/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/include"
export CPP="powerpc-fsl_networking-linux-gnuspe-gcc -E --sysroot=/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb  -m32   -mcpu=8548 -mabi=spe -mspe -mfloat-gprs=double"
export BUILD_CXXFLAGS="-isystem/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/include -O2 -pipe -fpermissive"
export CCACHE_DISABLE="1"
export HOME="/home/sangmin"
export PATCH_GET="0"
export exec_prefix="/usr"
export base_libdir="/lib"
export LOGNAME="sangmin"
export PATH="/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/scripts:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/bin/ppce500v2-fsl_networking-linux-gnuspe:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb/usr/bin/crossscripts:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/sbin:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/usr/bin:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux/sbin:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/i686-linux//bin:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/scripts:/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/bitbake/bin:/usr/lib/lightdm/lightdm:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/powerpc-unknown-eabispe/bin"
export TARGET_CFLAGS="-O2 -pipe -g -feliminate-unused-debug-types"
unset MACHINE
export BUILD_AR="ar"
export BUILD_AS="as"
export sharedstatedir="/com"
export OBJDUMP="powerpc-fsl_networking-linux-gnuspe-objdump"
unset DISTRO
export nonarch_base_libdir="/lib"
export SHELL="/bin/bash"
export BUILD_STRIP="strip"
export CC="powerpc-fsl_networking-linux-gnuspe-gcc  -m32   -mcpu=8548 -mabi=spe -mspe -mfloat-gprs=double --sysroot=/home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/sysroots/p2020rdb"
export sysconfdir="/etc"
sysroot_stage_all() {
	sysroot_stage_dirs /home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/work/p2020rdb-fsl_networking-linux-gnuspe/u-boot/git-r33/image /home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/work/p2020rdb-fsl_networking-linux-gnuspe/u-boot/git-r33/sysroot-destdir/

}

sysroot_stage_dirs() {
	from="$1"
	to="$2"

	sysroot_stage_dir $from/usr/include $to/usr/include
	if [ "i686-linux" = "powerpc-fsl_networking-linux-gnuspe" ]; then
		sysroot_stage_dir $from/usr/bin $to/usr/bin
		sysroot_stage_dir $from/usr/sbin $to/usr/sbin
		sysroot_stage_dir $from/bin $to/bin
		sysroot_stage_dir $from/sbin $to/sbin
		sysroot_stage_dir $from/usr/lib/u-boot $to/usr/lib/u-boot
		sysroot_stage_dir $from/etc $to/etc
		sysroot_stage_dir $from/var $to/var
	fi
	if [ -d $from/usr/lib ]
	then
		sysroot_stage_libdir $from//usr/lib $to/usr/lib
	fi
	if [ -d $from/lib ]
	then
		sysroot_stage_libdir $from/lib $to/lib
	fi
	if [ -d $from/lib ]
	then
		sysroot_stage_libdir $from/lib $to/lib
	fi
	sysroot_stage_dir $from/usr/share $to/usr/share
	# We don't care about docs/info/manpages/locales
	rm -rf $to/usr/share/man/ $to/usr/share/doc/ $to/usr/share/info/ ${to}/usr/share/locale/
	rm -rf $to/usr/share/applications/ $to/usr/share/fonts/ $to/usr/share/pixmaps/

}

sysroot_stage_dir() {
	src="$1"
	dest="$2"
	# if the src doesn't exist don't do anything
	if [ ! -d "$src" ]; then
		 return
	fi

	# We only want to stage the contents of $src if it's non-empty so first rmdir $src
	# then if it still exists (rmdir on non-empty dir fails) we can copy its contents
	rmdir "$src" 2> /dev/null || true
	# However we always want to stage a $src itself, even if it's empty
	mkdir -p "$dest"
	if [ -d "$src" ]; then
		tar -cf - -C "$src" -ps . | tar -xf - -C "$dest"
	fi

}

sysroot_stage_libdir() {
	src="$1"
	dest="$2"

	sysroot_stage_dir $src $dest

}

cd /home/sangmin/QorIQ-SDK-V1.4-20130625-yocto/build_p2020rdb_release/tmp/work/p2020rdb-fsl_networking-linux-gnuspe/u-boot/git-r33/git
sysroot_stage_all
